{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/js/helper/helper.js","../src/main.js"],"sourcesContent":["export const render = images => {\n  return images.reduce(\n    (\n      markup,\n      { tags, webformatURL, largeImageURL, likes, views, comments, downloads }\n    ) => {\n      return (markup += `<li class=\"photo-container gallery-item\">\n    <a href=${largeImageURL} class=\"card-link js-card-link\">\n        <img class=\"photo\" src=\"${webformatURL}\" alt=\"${tags}\" >\n    </a>\n    <div class=\"info-cont\">\n        <div class=\"info-item\">\n            <span class=\"title\">Likes</span>\n            <span class=\"info\">${likes}</span>\n        </div>\n        <div class=\"info-item\">\n            <span class=\"title\">Views</span>\n            <span class=\"info\">${views}</span>\n        </div>\n        <div class=\"info-item\">\n            <span class=\"title\">Comments</span>\n            <span class=\"info\">${comments}</span>\n        </div>\n        <div class=\"info-item\">\n            <span class=\"title\">Downloads</span>\n            <span class=\"info\">${downloads}</span>\n        </div>\n    </div>\n</li>\n    `);\n    },\n    ''\n  );\n};\n","const API_KEY = '33935915-442e02dd22c1a8a84f5950f15';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport const PER_PAGE = 15;\n\nimport axios from 'axios';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport const fetchNewPhotos = async (query, photosPage = 1) => {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: PER_PAGE,\n      page: photosPage,\n    },\n  });\n\n  return response.data;\n};\n","export const ShowLoader = loader => {\n  loader.classList.remove('display-none');\n};\n\nexport const HideLoader = loader => {\n  loader.classList.add('display-none');\n};\nexport const ShowLoadMoreBtn = loadMore => {\n  loadMore.classList.remove('load-more-none');\n};\nexport const HideLoadMoreBtn = loadMore => {\n  loadMore.classList.add('load-more-none');\n};\nexport const DisableSearchBtn = searchBtn => {\n  searchBtn.classList.add('btn-search-disable');\n};\nexport const EnableSearchBtn = searchBtn => {\n  searchBtn.classList.remove('btn-search-disable');\n};\n// export default function ShowLoadMoreBtn() {\n//   const loadMore = document.querySelector('.load-more');\n//   loadMore.classList.remove('load-more-none');\n// }\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\n//import functions\nimport { render } from './js/render-functions';\nimport { fetchNewPhotos, PER_PAGE } from './js/pixabay-api.js';\nimport {\n  ShowLoader,\n  HideLoader,\n  ShowLoadMoreBtn,\n  DisableSearchBtn,\n  EnableSearchBtn,\n  HideLoadMoreBtn,\n} from './js/helper/helper.js';\n\nconst formSearch = document.querySelector('.form-search');\nconst imgGallery = document.querySelector('.gallery');\nconst searchBtn = document.querySelector('.btn-search');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\n//big pictures builder\nconst builder = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionsDelay: 250,\n});\n\n//search params\n\nlet totalPages = 0;\nlet query = '';\nlet photosPage = 1;\n\nconst search = async event => {\n  event.preventDefault();\n\n  // get query string\n  const form = event.currentTarget;\n  query = form.elements.searchWords.value.trim();\n\n  imgGallery.innerHTML = '';\n  photosPage = 1;\n\n  //cheak is empty searchQuery\n  if (query === '') {\n    HideLoadMoreBtn(loadMoreBtn);\n    iziToast.error({\n      message: 'Field cannot be empty!',\n    });\n    formSearch.reset();\n    return;\n  }\n\n  try {\n    ShowLoader(loader);\n    DisableSearchBtn(searchBtn);\n\n    //render gallery\n    const { hits, totalHits } = await fetchNewPhotos(query, photosPage);\n\n    if (totalHits === 0) {\n      EnableSearchBtn(searchBtn);\n\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n\n      formSearch.reset();\n      HideLoader(loader);\n      return;\n    }\n    //render gallery and add big pictures\n    imgGallery.insertAdjacentHTML('beforeend', render(hits));\n    smoothScroll();\n    builder.refresh();\n\n    EnableSearchBtn(searchBtn);\n    // ShowLoadMoreBtn(loadMoreBtn);\n    HideLoader(loader);\n\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (totalPages > 1) {\n      // Show laod more btn\n      ShowLoadMoreBtn(loadMoreBtn);\n    }\n    if (totalPages === 1) {\n      // Show laod more btn\n      HideLoadMoreBtn(loadMoreBtn);\n    }\n  } catch (error) {\n    //  enable search button and hide loader\n    EnableSearchBtn(searchBtn);\n    HideLoader(loader);\n\n    iziToast.error({\n      message: 'Search params is not valid!',\n      position: 'topRight',\n    });\n    formSearch.reset();\n    return;\n  }\n  formSearch.reset();\n};\n// -1- event (submit form(click no search btn))\nformSearch.addEventListener('submit', search);\n\nconst smoothScroll = () => {\n  const lastEl = document.querySelector('.photo-container:last-child');\n  const photoPosHeight = lastEl.getBoundingClientRect().height;\n  const scrollHeight = photoPosHeight * 2;\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\nconst PressedBtmLoadMore = async event => {\n  try {\n    event.preventDefault();\n\n    ShowLoader(loader);\n\n    photosPage += 1;\n\n    //render more pictures\n    const { hits, totalHits } = await fetchNewPhotos(query, photosPage);\n\n    imgGallery.insertAdjacentHTML('beforeend', render(hits));\n    builder.refresh();\n    smoothScroll();\n\n    HideLoader(loader);\n    if (totalHits === 0) {\n      EnableSearchBtn(searchBtn);\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n      formSearch.reset();\n      HideLoader(loader);\n      return;\n    }\n    totalPages = Math.ceil(totalHits / PER_PAGE);\n    if (photosPage >= totalPages) {\n      // Show laod more btn\n      ShowLoadMoreBtn(loadMoreBtn);\n      loadMoreBtn.removeEventListener('click', onLoadMorePress);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n  } catch (error) {\n    HideLoadMoreBtn(loadMoreBtn);\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n};\n\n// -2- second event(click on btn load more)\nloadMoreBtn.addEventListener('click', PressedBtmLoadMore);\n"],"names":["render","images","markup","tags","webformatURL","largeImageURL","likes","views","comments","downloads","API_KEY","BASE_URL","PER_PAGE","axios","fetchNewPhotos","query","photosPage","ShowLoader","loader","HideLoader","ShowLoadMoreBtn","loadMore","HideLoadMoreBtn","DisableSearchBtn","searchBtn","EnableSearchBtn","formSearch","imgGallery","loadMoreBtn","builder","SimpleLightbox","totalPages","search","event","iziToast","hits","totalHits","smoothScroll","scrollHeight","PressedBtmLoadMore"],"mappings":"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"}